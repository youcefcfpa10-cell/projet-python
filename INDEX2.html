<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>تغيير كلمة المرور</title>
<link rel="icon" href="images/ITP1.ico">
<style>
body{
    margin:0;
    font-family: Arial, sans-serif;
    background:#D35400;
    color:white;
}
.container{
    width:600px;
    margin:30px auto;
    text-align:center;
}
.box{
    border:4px solid #fff;
    border-radius:8px;
    padding:10px;
    margin:10px 0;
}
.big{
    font-size:26px;
    font-weight:bold;
}
.btn{
    width:200px;
    padding:12px;
    border:none;
    border-radius:10px;
    font-size:16px;
    font-weight:bold;
    cursor:pointer;
    box-shadow:0 6px 0 rgba(0,0,0,0.3);
    transition:all 0.3s ease;
    margin:10px;
}
.btn:active{
    box-shadow:0 2px 0 rgba(0,0,0,0.3);
    transform:translateY(4px);
}
.btn-change{
    background:linear-gradient(#3498db,#21618c);
    color:white;
}
.btn-change:hover{
    background:linear-gradient(#5dade2,#3498db);
}
.btn-exit{
    background:linear-gradient(#ff0000,#cc0000);
    color:white;
}
.btn-exit:hover{
    background:linear-gradient(#ff4d4d,#ff1a1a);
}
</style>
</head>
<body>
<div class="container">
    <div class="box big">واجهة تغيير كلمة المرور</div>
    <button class="btn btn-change" onclick="changePassword()">تغيير كلمة المرور</button>
    <button class="btn btn-exit" onclick="exitApp()">الخروج</button>
</div>

<script>
async function loadPasswords() {
    const res = await fetch('data1.json');
    return await res.json();
}

async function savePasswords(newData) {
    await fetch('save_password.php', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify(newData)
    });
}

async function changePassword() {
    const data = await loadPasswords();
    const username = prompt("أدخل اسم المستخدم:");
    if (!username || !data[username]) {
        alert("اسم المستخدم غير موجود!");
        return;
    }
    const newPass = prompt("أدخل كلمة المرور الجديدة:");
    if (!newPass) return;
    data[username].password = newPass;
    await savePasswords(data);
    alert("تم تحديث كلمة المرور بنجاح ✅");
}

function exitApp() {
    document.body.style.opacity = 0;
    setTimeout(()=>{window.location.href = "exit.html";}, 500);
}
</script>
</body>
</html>
