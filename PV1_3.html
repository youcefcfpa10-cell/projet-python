<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ø¥Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ - Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©</title>
<link rel="icon" href="images/ITP1.ICO">
<style>
  body {
    background-color: #D35400;
    font-family: Arial, sans-serif;
    color: white;
    margin: 0;
    padding: 0;
  }
  h1 {
    text-align: center;
    font-size: 28px;
    margin-top: 20px;
    font-style: italic;
  }
  .container {
    width: 95%;
    margin: auto;
    padding: 10px;
  }
  label {
    display: inline-block;
    width: 200px;
    text-align: right;
    font-weight: bold;
  }
  input[type="text"] {
    width: 400px;
    padding: 5px;
    margin-bottom: 10px;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    margin-bottom: 20px;
  }
  th, td {
    border: 1px solid white;
    padding: 8px;
    text-align: center;
  }
  th {
    background-color: #B03A2E;
  }
  td.element {
    text-align: right;
    background-color: #D35400;
    font-weight: bold;
  }
  td.base {
    background-color: white;
    color: black;
  }
  td.input-cell input {
    width: 80px;
    text-align: center;
  }
  td.total {
    background-color: #FFFACD;
    color: black;
    font-weight: bold;
  }
  .buttons {
    text-align: center;
    margin-bottom: 30px;
  }
  button {
    font-size: 16px;
    font-weight: bold;
    padding: 10px 20px;
    margin: 5px;
    cursor: pointer;
    border: none;
    border-radius: 5px;
  }
  .save { background-color: #28a745; color: white; }
  .notes { background-color: #1E90FF; color: white; }
  .exit { background-color: #FF0000; color: white; }
</style>
</head>
<body>

<h1>Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©</h1>
<div class="container">
  <div>
    <label for="lessonTitle">Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬:</label>
    <input type="text" id="lessonTitle">
  </div>

  <table id="marksTable">
    <thead>
      <tr>
        <th>Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ù…ØªØ­ØµÙ„ Ø¹Ù„ÙŠÙ‡Ø§</th>
        <th>Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ù‚Ø§Ø¹Ø¯ÙŠØ©</th>
        <th>Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªÙ†Ù‚ÙŠØ·</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>

  <div class="buttons">
    <button class="notes" onclick="openNotes()">ğŸ“ Ø§Ù„ØªÙ‚Ø¯ÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</button>
    <button class="save" onclick="saveMarks()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª</button>
    <button class="exit" onclick="returnToMain()">â¬…ï¸ Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
  </div>
</div>

<script>
  const elements = [
    "Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹",
    "Ù‚ÙŠÙ…Ø© ÙˆØ¨Ù†Ø§Ø¡ Ø§Ù„Ø£ÙÙƒØ§Ø±",
    "Ø§Ù„Ù‚Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªØ­Ù„ÙŠÙ„ ÙˆØ¬Ù…Ø¹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬",
    "Ø§Ù„ØªØ¹Ø¨ÙŠØ± â€“ Ø§Ù„Ø§ØªØµØ§Ù„",
    "Ù…Ù„Ø§Ø¡Ù…Ø© ÙˆØ¯Ù‚Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª",
    "Ø§Ù„ØªÙØªØ­ Ø§Ù„Ø°Ù‡Ù†ÙŠ",
    "ÙˆØ¶Ø¹ Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ùˆ Ø¥Ø­ØªØ±Ø§Ù… Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª",
    "Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹"
  ];
  const baseMarks = [3, 3, 3, 3, 3, 3, 2, 20];

  const tbody = document.querySelector("#marksTable tbody");
  const inputs = [];
  let notesText = "";

  elements.forEach((el, i) => {
    const row = document.createElement("tr");

    // Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ù…ØªØ­ØµÙ„ Ø¹Ù„ÙŠÙ‡Ø§
    const tdInput = document.createElement("td");
    tdInput.classList.add("input-cell");
    if (i < elements.length - 1) {
      const input = document.createElement("input");
      input.type = "text";
      input.addEventListener("input", updateTotal);
      tdInput.appendChild(input);
      inputs.push(input);
    } else {
      tdInput.classList.add("total");
      tdInput.textContent = "0.00";
    }

    // Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ù‚Ø§Ø¹Ø¯ÙŠØ©
    const tdBase = document.createElement("td");
    tdBase.classList.add("base");
    tdBase.textContent = baseMarks[i].toFixed(2);

    // Ø§Ù„Ø¹Ù†ØµØ±
    const tdEl = document.createElement("td");
    tdEl.classList.add("element");
    tdEl.textContent = el;

    row.appendChild(tdInput);
    row.appendChild(tdBase);
    row.appendChild(tdEl);
    tbody.appendChild(row);
  });

  function updateTotal() {
    let total = 0;
    inputs.forEach((input, i) => {
      let val = parseFloat(input.value.replace(",", "."));
      if (isNaN(val)) {
        input.style.backgroundColor = "#FFB6C1";
        val = 0;
      } else if (val < 0) {
        input.style.backgroundColor = "#FFB6C1";
        val = 0;
      } else if (val > baseMarks[i]) {
        input.style.backgroundColor = "#FFCCCB";
        val = baseMarks[i];
      } else {
        input.style.backgroundColor = "white";
      }
      total += val;
    });
    const totalCell = tbody.rows[tbody.rows.length - 1].cells[0];
    totalCell.textContent = total.toFixed(2);
    if (total < 10) totalCell.style.backgroundColor = "#FF6347";
    else if (total < 16) totalCell.style.backgroundColor = "#FFD700";
    else totalCell.style.backgroundColor = "#32CD32";
  }

  function openNotes() {
    const note = prompt("Ø£Ø¯Ø®Ù„ Ø§Ù„ØªÙ‚Ø¯ÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©:", notesText);
    if (note !== null) {
      notesText = note;
      alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ âœ…");
    }
  }

  function saveMarks() {
    const marks = inputs.map(input => input.value || "0");
    const lessonTitle = document.getElementById("lessonTitle").value;
    const total = tbody.rows[tbody.rows.length - 1].cells[0].textContent;
    const data = {
      lesson_title1: lessonTitle,
      marks: marks,
      total1: total,
      notes1: notesText
    };
    // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ localStorage ÙƒØ¨Ø¯ÙŠÙ„ Ù„Ù„Ù€ JSON ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­
    localStorage.setItem("PV1_3", JSON.stringify(data));
    alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª âœ…");
  }

  function returnToMain() {
    if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©ØŸ")) {
      window.location.href = "index.html"; // Ø§Ø³ØªØ¨Ø¯Ù„ Ø¨Ø±Ø§Ø¨Ø· Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    }
  }

  // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ø¥Ø°Ø§ ÙˆØ¬Ø¯Øª
  const savedData = JSON.parse(localStorage.getItem("PV1_3") || "{}");
  if (savedData.lesson_title1) {
    document.getElementById("lessonTitle").value = savedData.lesson_title1;
    savedData.marks?.forEach((val, i) => {
      if (inputs[i]) inputs[i].value = val;
    });
    notesText = savedData.notes1 || "";
    updateTotal();
  }

</script>
</body>
</html>
